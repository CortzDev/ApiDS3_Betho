<!doctype html>
<html><head>
<meta charset="utf-8"><title>Login - Blockchain</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet"/>
</head><body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="w-full max-w-md bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-bold mb-4">Iniciar sesión</h2>
    <input id="email" placeholder="Correo" class="w-full p-2 border rounded mb-3"/>
    <input id="pass" type="password" placeholder="Contraseña" class="w-full p-2 border rounded mb-3"/>
    <div class="flex gap-2">
      <button onclick="login()" class="bg-blue-600 text-white px-4 py-2 rounded">Ingresar</button>
      <button onclick="showRegister()" class="bg-gray-200 px-4 py-2 rounded">Registrarse</button>
    </div>
    <p id="msg" class="text-red-500 mt-2"></p>
  </div>

<script>
function showRegister(){ location.href='/register.html'; }
async function login(){
  const email=document.getElementById('email').value;
  const pass=document.getElementById('pass').value;
  const res = await fetch('/login',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, password: pass }) });
  const j = await res.json();
  if(!j.ok){ document.getElementById('msg').innerText = j.error; return; }
  localStorage.setItem('token', j.token);
  location.href='/dashboard.html';
}
</script>
</body></html>
