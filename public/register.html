<!doctype html>
<html><head>
<meta charset="utf-8"><title>Registro - Blockchain</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="/style.css" rel="stylesheet">

</head><body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="w-full max-w-md bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-bold mb-4">Registro</h2>
    <input id="email" placeholder="Correo" class="w-full p-2 border rounded mb-3"/>
    <input id="pass" type="password" placeholder="ContraseÃ±a" class="w-full p-2 border rounded mb-3"/>
    <div class="flex gap-2">
      <button onclick="register()" class="bg-green-600 text-white px-4 py-2 rounded">Registrar</button>
      <button onclick="back()" class="bg-gray-200 px-4 py-2 rounded">Volver</button>
    </div>
    <p id="msg" class="mt-2"></p>
  </div>

<script>
function back(){ location.href='/' }
async function register(){
  const email=document.getElementById('email').value;
  const pass=document.getElementById('pass').value;
  const res = await fetch('/register',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, password: pass }) });
  const j = await res.json();
  if(!j.ok){ document.getElementById('msg').className='text-red-600 mt-2'; document.getElementById('msg').innerText=j.error; return; }
  if (j.otp) {
    document.getElementById('msg').className='text-yellow-600 mt-2';
    document.getElementById('msg').innerText='Registro creado. OTP (prueba): '+j.otp;
  } else {
    document.getElementById('msg').className='text-green-600 mt-2';
    document.getElementById('msg').innerText='Registro creado. Revisa tu correo.';
  }
  setTimeout(()=>{ location.href='/verificar.html'; }, 1500);
}
</script>
</body></html>
